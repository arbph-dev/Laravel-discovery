<!DOCTYPE html>
<html>
<head>
	<title>Leaflet</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link 
        rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""
    />

    <script 
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin="">
    </script>


	<!-- Extension GÃ©oplateforme pour Leaflet -->
	<script src="./GpPluginLeaflet/GpPluginLeaflet.js"></script>
	<link rel="stylesheet" href="./GpPluginLeaflet/GpPluginLeaflet.css"/>


<script src="https://unpkg.com/leaflet-tilelayer-wmts@1.0.0/dist/leaflet-tilelayer-wmts.js"></script>


	<style type="text/css">
	#info {
    	padding: 5px;
    	width: 100%;
    	height: 20px;
    	font-family: monospace;
	}

	#map {
		padding: 5px;
		width: 100%;
		height: 90vh;
		box-shadow: 0 0 10px #999;
	}

	</style>

</head>
<body>



<div id="map" style="width: 1200px; height: 800px;"></div>
<div id="info"></div>
<script>


window.onload = function() {
		
		var createMap = function() {




			var map = L.map("map", { gestureHandling: true, attributionControl: false }).setView([47.82, -4.30], 11);
			var lyrOrtho = L.geoportalLayer.WMTS({layer: "ORTHOIMAGERY.ORTHOPHOTOS",});
			var lyrMaps = L.geoportalLayer.WMTS({layer: "GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",}, { opacity: 0.5 });
			var lyrCadastre = L.geoportalLayer.WMTS({ layer: "CADASTRALPARCELS.PARCELLAIRE_EXPRESS"	}, { opacity: 1	});

			/*
			var lyrOSM = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { 
					attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
					opacity : 0.5
			});
			*/
			const lyrSHOM_Epave = L.tileLayer.wmts("https://services.data.shom.fr/INSPIRE/wmts", {
			layer: "EPAVES_PYR-PNG_WLD_3857_WMTS",
			tilematrixSet: "3857",     // ou "EPSG:3857" selon le service
			format: "image/png",
			style: "normal"
			});

			//		layer: "RASTER_MARINE_3857_WMTS"  , "SCAN-LITTO_PYR-PNG_WLD_3857_WMTS" => non car payant
			const lyrSHOM_Raster = L.tileLayer.wmts("https://services.data.shom.fr/INSPIRE/wmts", {
			layer: "BALISAGE_PYR_PNG_3857_WMTS",
			tilematrixSet: "3857",     // ou "EPSG:3857" selon le service
			format: "image/png",
			style: "normal"
			});




			const lyrOSM = L.tileLayer(
			"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
			{ attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
				opacity: 0.5 }
			);

			var layerOptions = {
				layers: [
					{ layer: lyrMaps		, config: { visibility: false }	},
					{ layer: lyrOSM     	, config: { visibility: false, title: "OSM"	} },
					{ layer: lyrCadastre	, config: { visibility: false } },
					{ layer: lyrSHOM_Epave	, config: { visibility: false , title: "EPAVES" } },
					{ layer: lyrSHOM_Raster	, config: { visibility: false , title: "SHOM map" } },
					{ layer: lyrOrtho	, config: { visibility: true , title: "PHOTOS" } }
				]
			}


			map.addLayer(lyrOrtho);
			map.addLayer(lyrMaps);
			map.addLayer(lyrOSM);
			map.addLayer(lyrCadastre);
			map.addLayer(lyrSHOM_Epave);
			map.addLayer(lyrSHOM_Raster);
			

			var Points=[
				{name:"Point A", cgps : [47.84, -4.35] }, //0 NW
				{name:"Point B", cgps : [47.84, -4.25] }, //1 NE
				{name:"Point C", cgps : [47.82, -4.30] }, //2 C
				{name:"Point D", cgps : [47.80, -4.25] }, //3 SE
				{name:"Point E", cgps : [47.80, -4.35] }, //4 SW
			];	
		
		    for (var i = 0; i <Points.length;i++) {
        		var marker = L.marker(Points[i].cgps).addTo(map);
    		}

			var layerSwitcher = L.geoportalControl.LayerSwitcher(layerOptions);
			map.addControl(layerSwitcher);
			map.addControl(new L.Control.Fullscreen());


			L.control.scale({ imperial: false}).addTo(map);
			
			document.getElementById("info").innerHTML =  "<p>Library Leaflet " + L.version +  " - Extension IGN Leaflet " + Gp.leafletExtVersion +  " (" + Gp.leafletExtDate + ")</p>";
/*

*/
		};
		
		Gp.Services.getConfig({
			apiKey: "essentiels,ortho,cartes,administratif,decouverte",
			onSuccess: createMap,
			onFailure: function(e) {
				console.error(e);
			}
		});
};

</script>

https://jsfiddle.net/xavlight/6vst9bd3/<br>
https://geoservices.ign.fr/documentation/services/utilisation-web/extension-pour-leaflet
https://geoservices.ign.fr/documentation/services/utilisation-web/bibliotheque-dacces
https://data.geopf.fr/wms-r/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetCapabilities


https://services.data.shom.fr/support/fr/geoservices/WMTS

</body>
</html>